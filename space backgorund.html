<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Cinematic Space Control</title>

<style>
html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  background:#02040c;
  font-family:system-ui;
}
canvas{position:absolute;inset:0}

.panel{
  position:fixed;
  right:12px;
  bottom:12px;
  background:rgba(0,0,0,.55);
  padding:10px 14px;
  border-radius:12px;
  color:#fff;
  font-size:12px;
  backdrop-filter:blur(6px);
}
.panel label{display:block;margin-bottom:6px}
.panel input{width:160px}
.panel button{
  margin-top:6px;
  width:100%;
  border:none;
  border-radius:8px;
  padding:6px;
  cursor:pointer;
}
</style>
</head>

<body>

<canvas id="sky"></canvas>

<div class="panel">
  <label>‚≠ê Star Speed</label>
  <input type="range" id="speed" min="0.0001" max="5" value="0.5">
  <button id="toggle">‚è∏ Pause</button>
</div>

<script>
const canvas = document.getElementById("sky");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
addEventListener("resize", resize);
resize();

/* ===== Controls ===== */
let SPEED = 6;
let paused = false;
let autoRotate = true;

document.getElementById("speed").oninput = e=>{
  SPEED = +e.target.value;
};

const btn = document.getElementById("toggle");
btn.onclick = ()=>{
  paused = !paused;
  btn.textContent = paused ? "‚ñ∂ Play" : "‚è∏ Pause";
};

/* ===== Camera ===== */
let rot = 0;
let zoom = 1;

let down=false,lastX=0;
canvas.onmousedown=e=>{down=true;lastX=e.clientX;}
canvas.onmouseup=()=>down=false;
canvas.onmousemove=e=>{
  if(!down) return;
  autoRotate = false;
  rot += (e.clientX-lastX)*0.002;
  lastX=e.clientX;
};

canvas.onwheel=e=>{
  zoom *= e.deltaY>0?0.9:1.1;
  zoom = Math.max(0.5, Math.min(3, zoom));
};

/* ===== Stars ===== */
const stars=[];
const COUNT=1400;
const DEPTH=1200;

function resetStar(i){
  stars[i]={
    x:(Math.random()-0.5)*canvas.width,
    y:(Math.random()-0.5)*canvas.height,
    z:Math.random()*DEPTH+1,
    size:Math.random()*1.5+0.5,
    hue:180+Math.random()*120
  };
}
for(let i=0;i<COUNT;i++) resetStar(i);

/* ===== Nebula ===== */
const nebula=[];
for(let i=0;i<6;i++){
  nebula.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    r:300+Math.random()*400,
    hue:200+Math.random()*100,
    a:0.1
  });
}

/* ===== Draw ===== */
function draw(){
  ctx.fillStyle="#02040c";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  /* Nebula */
  ctx.save();
  ctx.globalCompositeOperation="lighter";
  for(const n of nebula){
    const g=ctx.createRadialGradient(n.x,n.y,0,n.x,n.y,n.r);
    g.addColorStop(0,`hsla(${n.hue},80%,60%,${n.a})`);
    g.addColorStop(1,"rgba(0,0,0,0)");
    ctx.fillStyle=g;
    ctx.beginPath();
    ctx.arc(n.x,n.y,n.r,0,Math.PI*2);
    ctx.fill();
  }
  ctx.restore();

  if(autoRotate && !paused){
    rot += 0.0006;
  }

  ctx.save();
  ctx.translate(canvas.width/2,canvas.height/2);
  ctx.rotate(rot);
  ctx.globalCompositeOperation="lighter";

  for(let i=0;i<stars.length;i++){
    const s=stars[i];
    if(!paused){
      s.z -= SPEED;
      if(s.z<=1){ resetStar(i); s.z=DEPTH; }
    }

    const k=300/s.z*zoom;
    const x=s.x*k;
    const y=s.y*k;
    const r=s.size*(1-s.z/DEPTH)*3;

    ctx.beginPath();
    ctx.arc(x,y,r,0,Math.PI*2);
    ctx.fillStyle=`hsla(${s.hue},80%,70%,1)`;
    ctx.fill();

    ctx.beginPath();
    ctx.moveTo(x,y);
    ctx.lineTo(x*1.05,y*1.05);
    ctx.strokeStyle=`hsla(${s.hue},80%,70%,0.6)`;
    ctx.lineWidth=r;
    ctx.stroke();
  }

  ctx.restore();
  requestAnimationFrame(draw);
}
draw();
</script>



<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

<script>
const scene = new THREE.Scene();

const camera = new THREE.PerspectiveCamera(
  75, window.innerWidth/window.innerHeight, 0.1, 1000
);
camera.position.z = 60;

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// ‚≠ê Galaxy stars
const stars = new THREE.BufferGeometry();
const count = 15000;
const positions = new Float32Array(count * 3);

for(let i=0;i<count;i++){
  const i3 = i * 3;
  const radius = Math.random() * 40;
  const angle = radius * 0.35;

  positions[i3]     = Math.cos(angle) * radius;
  positions[i3 + 1] = (Math.random() - 0.5) * 5;
  positions[i3 + 2] = Math.sin(angle) * radius;
}

stars.setAttribute('position', new THREE.BufferAttribute(positions,3));

const material = new THREE.PointsMaterial({
  color: 0x88ccff,
  size: 0.15,
  transparent:true
});

const galaxy = new THREE.Points(stars, material);
scene.add(galaxy);

// üé• Animate
function animate(){
  requestAnimationFrame(animate);
  galaxy.rotation.y += 0.0008;
  galaxy.rotation.x += 0.0002;
  renderer.render(scene, camera);
}
animate();

// resize
window.addEventListener('resize',()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

</body>
</html>

