<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Galaxy â€“ Double Arms (4 Spiral)</title>
<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:#02040c;
  overflow:hidden;
}
canvas{display:block}
</style>
</head>
<body>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

<script>
/* ================= BASIC ================= */
const scene = new THREE.Scene();

const camera = new THREE.PerspectiveCamera(
  60, innerWidth/innerHeight, 0.1, 1000
);
camera.position.z = 90;

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
renderer.setPixelRatio(devicePixelRatio);
document.body.appendChild(renderer.domElement);

/* ================= STARS ================= */
const starGeo = new THREE.BufferGeometry();
const starCount = 3500;
const starPos = new Float32Array(starCount*3);
const starColors = new Float32Array(starCount*3);
const starOpacities = new Float32Array(starCount);

for(let i=0;i<starCount;i++){
  starPos[i*3]   = (Math.random()-0.5)*600;
  starPos[i*3+1] = (Math.random()-0.5)*600;
  starPos[i*3+2] = (Math.random()-0.5)*600;

  const c = new THREE.Color().setHSL(Math.random(),0.7,0.7);
  starColors[i*3]   = c.r;
  starColors[i*3+1] = c.g;
  starColors[i*3+2] = c.b;

  starOpacities[i] = Math.random();
}
starGeo.setAttribute("position",new THREE.BufferAttribute(starPos,3));
starGeo.setAttribute("color",new THREE.BufferAttribute(starColors,3));
starGeo.setAttribute("opacity",new THREE.BufferAttribute(starOpacities,1));

const starTexture = new THREE.TextureLoader().load(
  "https://threejs.org/examples/textures/sprites/circle.png"
);

const stars = new THREE.Points(
  starGeo,
  new THREE.PointsMaterial({
    map: starTexture,
    vertexColors:true,
    size:1.5,
    transparent:true,
    blending:THREE.AdditiveBlending
  })
);
scene.add(stars);

/* ================= GALAXY (4 ARMS) ================= */
const gGeo = new THREE.BufferGeometry();
const gCount = 14000;
const gPos = new Float32Array(gCount*3);
const gColors = new Float32Array(gCount*3);
const gOpacities = new Float32Array(gCount);

const radius = 45;
const coreRadius = 10;

const arms = 4;          // â­ double arms
const armSpread = 1.2;   // thickness
const armHeight = 2.5;   // vertical depth

const armHues = [0.02, 0.15, 0.55, 0.75]; // ðŸ”´ðŸŸ¡ðŸŸ¢ðŸ”µ

for(let i=0;i<gCount;i++){
  let r,a,x,y,z;

  if(Math.random()<0.35){
    r = Math.random()*coreRadius;
    const t = Math.random()*Math.PI*2;
    const p = Math.acos(2*Math.random()-1);
    x = r*Math.sin(p)*Math.cos(t);
    y = r*Math.cos(p);
    z = r*Math.sin(p)*Math.sin(t);
  }else{
    r = coreRadius + Math.random()*(radius-coreRadius);

    const armIndex = i % arms;
    const armAngle = (armIndex / arms) * Math.PI * 2;

    a = r * 0.45 + armAngle;

    x = Math.cos(a)*r + (Math.random()-0.5)*armSpread;
    y = (Math.random()-0.5)*armHeight*(1-r/radius);
    z = Math.sin(a)*r + (Math.random()-0.5)*armSpread;
  }

  gPos[i*3]   = x;
  gPos[i*3+1] = y;
  gPos[i*3+2] = z;

  const hue = armHues[i % arms] + Math.random()*0.03;
  const col = new THREE.Color().setHSL(hue,0.7,0.55+Math.random()*0.25);

  gColors[i*3]   = col.r;
  gColors[i*3+1] = col.g;
  gColors[i*3+2] = col.b;

  gOpacities[i] = Math.random()*0.6 + 0.3;
}

gGeo.setAttribute("position",new THREE.BufferAttribute(gPos,3));
gGeo.setAttribute("color",new THREE.BufferAttribute(gColors,3));
gGeo.setAttribute("opacity",new THREE.BufferAttribute(gOpacities,1));

const galaxyTexture = new THREE.TextureLoader().load(
  "https://threejs.org/examples/textures/sprites/circle.png"
);

const galaxy = new THREE.Points(
  gGeo,
  new THREE.PointsMaterial({
    map:galaxyTexture,
    vertexColors:true,
    size:0.35,
    transparent:true,
    blending:THREE.AdditiveBlending
  })
);
scene.add(galaxy);

/* ================= CORE ================= */
const core = new THREE.Mesh(
  new THREE.SphereGeometry(coreRadius,32,32),
  new THREE.MeshBasicMaterial({
    color:0xfff1b8,
    transparent:true,
    opacity:0.85
  })
);
scene.add(core);

/* ================= MOUSE CONTROL ================= */
let down=false,lx=0,ly=0,rx=0,ry=0;

renderer.domElement.onmousedown=e=>{
  down=true; lx=e.clientX; ly=e.clientY;
};
onmouseup=()=>down=false;
onmousemove=e=>{
  if(!down) return;
  ry+=(e.clientX-lx)*0.003;
  rx+=(e.clientY-ly)*0.003;
  scene.rotation.y=ry;
  scene.rotation.x=rx;
  lx=e.clientX; ly=e.clientY;
};

onwheel=e=>{
  camera.position.z+=e.deltaY*0.05;
  camera.position.z=Math.max(30,Math.min(180,camera.position.z));
};

/* ================= ANIMATE ================= */
function animate(){
  requestAnimationFrame(animate);

  const t = performance.now()*0.002;

  galaxy.rotation.y += 0.0015;
  stars.rotation.y  += 0.0005;

  const pulse = 1 + Math.sin(t*0.5)*0.04;
  core.scale.set(pulse,pulse,pulse);

  renderer.render(scene,camera);
}
animate();

/* ================= RESIZE ================= */
onresize=()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
};
</script>

</body>
</html>
